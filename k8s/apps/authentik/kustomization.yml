apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: authentik

labels:
  - includeSelectors: true
    pairs:
      app.kubernetes.io/part-of: authentik

resources:
  - manifests/namespace.yml
  - manifests/rbac.yml
  - manifests/authentik-server.yml
  - manifests/authentik-worker.yml
  - manifests/redis.yml
  - manifests/ingress.yml

images:
  - name: ghcr.io/goauthentik/server
    newTag: "2025.2.2"

configMapGenerator:
  - name: authentik-env
    envs:
      - ./config/authentik.env

generators:
  - ./secret-generator.yml
